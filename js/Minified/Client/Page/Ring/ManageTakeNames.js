"object"!=typeof BabblingBrook.Client.Page.Ring&&(BabblingBrook.Client.Page.Ring={}),BabblingBrook.Client.Page.Ring.ManageTakeNames=function(){"use strict";var e,r,a,t,n,i,u;return r=function(){jQuery("#edit_take_names li .edit-take-name").unbind("click").click(function(){if(""!==jQuery("#take_name").val()||""!==jQuery("#amount").val()){var e=confirm("This will clear the fields. Are you sure?");if(!e)return}var r=jQuery(this);return jQuery("#create").val("Update"),jQuery("#delete").removeClass("hide"),jQuery("#take_name").val(r.text()),jQuery("#amount").val(r.parent().find(".edit-amount").text()),jQuery("#stream").val(r.parent().find(".edit-stream").text()),jQuery("#ring_take_name_id").val(r.parent().find(".edit-ring-take-name-id").text()),n(),!1})},a=function(e){var a=jQuery("#take_name_line_template>li").clone();jQuery(".edit-ring-take-name-id",a).text(e),jQuery(".edit-stream",a).text(jQuery("#stream").val()),jQuery(".edit-amount",a).text(jQuery("#amount").val()),jQuery(".edit-take-name",a).text(jQuery("#take_name").val()),jQuery("#edit_take_names ul").prepend(a),r()},t=function(e){var r=jQuery("#edit_take_names ul").find('.edit-ring-take-name-id:contains("'+e+'")').parent();r.length>0&&(jQuery(".edit-stream",r).html(jQuery("#stream").val()),jQuery(".edit-amount",r).html(jQuery("#amount").val()),jQuery(".edit-take-name",r).html(jQuery("#take_name").val()))},n=function(){jQuery("#create").unbind("click"),jQuery("#clear").unbind("click"),jQuery("#delete").unbind("click"),jQuery("#create").click(function(){return e.addClass("block-loading"),BabblingBrook.Library.post("inserttakename",{take_name:jQuery("#take_name").val(),amount:jQuery("#amount").val(),ring_take_name_id:jQuery("#ring_take_name_id").val(),stream:jQuery("#stream").val()},function(r){jQuery("#take_name_error").html(""),jQuery("#amount_error").html(""),jQuery("#stream_error").html(""),r.errors!==!1?("undefined"!=typeof r.errors.name&&jQuery("#take_name_error").html(r.errors.name),"undefined"!=typeof r.errors.amount&&jQuery("#amount_error").html(r.errors.amount),"undefined"!=typeof r.errors.stream_version&&jQuery("#stream_error").html(r.errors.stream_version),"undefined"!=typeof r.errors.stream&&jQuery("#stream_error").html(r.errors.stream),e.removeClass("block-loading")):("undefined"==typeof r.ring_take_name_id&&console.error("../ring/inserttakename has not returned a value for ring_take_name_id"),"Create"===jQuery("#create").val()?a(r.ring_take_name_id):t(r.ring_take_name_id),i())}),!1}),jQuery("#clear").click(function(){return i(),!1}),jQuery("#delete").click(function(){var r=confirm("Are you sure you want to delete this take name?");if(r){e.addClass("block-loading");var a=jQuery("#ring_take_name_id").val();BabblingBrook.Library.post("deletetakename",{ring_take_name_id:a},function(r){"undefined"!=typeof r.success&&r.success===!0?(i(),u(a)):console.error("../ring/deletetakename has not deleted ring_take_name_id : "+a),e.removeClass("block-loading")})}return!1})},i=function(){jQuery("#take_name").val(""),jQuery("#amount").val(""),jQuery("#stream").val(""),jQuery("#ring_take_name_id").val(""),jQuery("#create").val("Create"),jQuery("#delete").addClass("hide"),n(),e.removeClass("block-loading")},u=function(e){var r=jQuery("#edit_take_names ul").find('.edit-ring-take-name-id:contains("'+e+'")').parent();r.remove()},{construct:function(){e=jQuery("#create_take_name"),r(),n();var a=jQuery("#select_stream_selector");jQuery("#select_stream").click(function(){if(a.is(":visible"))return a.slideUp(250,function(){jQuery("#select_stream").text("Search"),a.empty()}),!1;{var e=[{name:"Select",onClick:function(e,r,t){e.preventDefault();var n=BabblingBrook.Library.makeStreamUrl({domain:t.domain,username:t.username,name:t.name,version:"0/0/0"});jQuery("#stream").val(n),a.css("display","").slideUp(250,function(){a.addClass("hide").css("display","")}),jQuery("#select_stream").text("Search")}}];new BabblingBrook.Client.Component.Selector("stream","stream_results",a,e,{show_fields:{version:!1}})}return a.slideDown(250,function(){jQuery("#select_stream").text("Close search"),a.removeClass("hide")}),!1})}}}(),jQuery(function(){"use strict";BabblingBrook.Client.Page.Ring.ManageTakeNames.construct()});
//# sourceMappingURL=/js/Minified/Client/Page/Ring/ManageTakeNames.js.map