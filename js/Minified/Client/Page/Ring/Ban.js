"object"!=typeof BabblingBrook.Client.Page.Ring&&(BabblingBrook.Client.Page.Ring={}),BabblingBrook.Client.Page.Ring.Ban=function(){"use strict";var e,n,r=function(r,a,t){t.addClass("row-loading"),BabblingBrook.Client.Core.Interact.postAMessage({user:{domain:r,username:a},ring:{domain:n,username:e}},"ReinstateRingMember",o.bind(null,r,a,t),i.bind(null,r,a,t))},o=function(e,n,r,o){return o.success===!1?void i(e,n,r):(r.removeClass("row-loading"),jQuery(".ring-ban",r).text("true"),jQuery(".selector-action-reinstate",r).addClass("hidden"),void jQuery(".selector-action-ban",r).removeClass("hidden"))},i=function(e,n,r){s(r,e,n,"#on_ring_member_reinstated_error_template")},a=function(e,n,r,o){return o.success===!1?void t(e,n,r):(r.removeClass("row-loading"),jQuery(".ring-ban",r).text("true"),jQuery(".selector-action-ban",r).addClass("hidden"),void jQuery(".selector-action-reinstate",r).removeClass("hidden"))},t=function(e,n,r){s(r,e,n,"#on_ring_member_banned_error_template")},s=function(r,o,i,a){r.removeClass("row-loading").addClass("row-error");var t=jQuery(a).clone();jQuery(".ring-request-user",t).text(i+"@"+o),jQuery(".ring-request-ring",t).text(e+"@"+n),BabblingBrook.Client.Component.Messages.addMessage({type:"error",message:t.text()})},l=function(r,o,i){i.addClass("row-loading"),BabblingBrook.Client.Core.Interact.postAMessage({user:{domain:r,username:o},ring:{domain:n,username:e}},"BanRingMember",a.bind(null,r,o,i),t.bind(null,r,o,i))},u=function(e){{var n=jQuery("#ring_member_list"),o=[{name:"Ban",onClick:function(e,n,r){e.preventDefault(),l(r.domain,r.username,n)},onReady:function(e,n){"true"===n.ring_ban&&jQuery(".selector-action-ban",e).addClass("hidden")}},{name:"Reinstate",onClick:function(e,n,o){e.preventDefault(),r(o.domain,o.username,n)},onReady:function(e,n){"false"===n.ring_ban&&jQuery(".selector-action-reinstate",e).addClass("hidden")}}];new BabblingBrook.Client.Component.Selector("user","ring_member_list",n,o,{onReady:function(){},show_fields:{ring_ban:!0},ring_filter:{domain:window.location.host,username:BabblingBrook.Library.extractUsername(window.location.href)}},e)}};return{construct:function(){e=BabblingBrook.Library.extractUsername(window.location.href),n=window.location.hostname,u(1)}}}(),jQuery(function(){"use strict";BabblingBrook.Client.Page.Ring.Ban.construct()});
//# sourceMappingURL=/js/Minified/Client/Page/Ring/Ban.js.map