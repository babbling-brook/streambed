"object"!=typeof BabblingBrook.Client.Page.User&&(BabblingBrook.Client.Page.User={}),BabblingBrook.Client.Page.User.EditProfile=function(){"use strict";var e,i={},r=function(){BabblingBrook.Library.wait(function(){return"undefined"!=typeof QqFileuploader},function(){{var i=jQuery("#edit_profile_uploader_template");new QqFileuploader.FileUploader({element:jQuery("#new_profile_image")[0],action:"/"+e+"/newprofileimage",template:i.html(),onSubmit:function(){jQuery("#new_profile_image .QqFileuploader-upload-list").html(""),jQuery("#new_profile_image").addClass("block-loading")},onComplete:function(){jQuery("#new_profile_image").removeClass("block-loading");var i=e.replace(/ /g,"-"),r=window.location.hostname,o="?"+(new Date).getTime(),a="/images/user/"+r+"/"+i+"/profile/small/profile.jpg"+o;jQuery("#profile_image").attr("src",a);var t=new Image;t.src="/images/user/"+r+"/"+i+"/profile/large/profile.jpg"+o}})}},function(){},{message:"Wait function has timmed out. qq image upload"})},o=function(){jQuery(".edit-profile-field").bind("blur",function(){var r=jQuery(this),o=i[r.attr("id")],a=r.val();if(o===a)return void BabblingBrook.Library.fieldSuccess(r);r.addClass("textbox-loading"),BabblingBrook.Library.fieldWorking(r);var t="/"+e+"/editprofilefields";BabblingBrook.Library.post(t,{field:r.attr("data-field_name"),value:r.val()},function(e){if(r.removeClass("textbox-loading"),"boolean"!=typeof e.success){var i="Data returned from "+t+" is invalid.";return void console.error(i)}var o=r.siblings(".error");return o.addClass("hide"),"string"==typeof e.error?(o.html(e.error).removeClass("hide"),void BabblingBrook.Library.fieldError(r)):(BabblingBrook.Library.fieldSuccess(r),void("about"===r.attr("data-field_name")&&BabblingBrook.Client.Page.User.EditProfile.onDescriptionEditedHook()))})}),jQuery(".edit-profile-field").bind("focus",function(){var e=jQuery(this);BabblingBrook.Library.fieldEditing(e),i[e.attr("id")]=e.val()})};return{construct:function(){e=jQuery("#username_for_profile").val(),r(),o(),BabblingBrook.Client.Core.Loaded.setEditProfileLoaded()},onDescriptionEditedHook:function(){}}}(),jQuery(function(){"use strict";BabblingBrook.Client.Page.User.EditProfile.construct()});
//# sourceMappingURL=/js/Minified/Client/Page/User/EditProfile.js.map